#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <windows.h>

int getRandomNumber(int level);                   // ëœë¤í•œ ìˆ˜ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
void showQuestion(int level, int num1, int num2); // ë¬¸ì œë¥¼ ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜
void playGame(); // ê²Œì„ì„ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜

int main(void)
{
    // ë¬¸ì´ 5ê°œê°€ ìˆê³ , ê° ë¬¸ë§ˆë‹¤ ì ì  ì–´ë ¤ìš´ ìˆ˜ì‹ í€´ì¦ˆê°€ ì¶œì œ (ëœë¤)
    // ë¬¸ì œ ìœ í˜• : x*y = ?
    // ë§íˆë©´ í†µê³¼, í‹€ë¦¬ë©´ ì‹¤íŒ¨

    srand(time(NULL)); // ëœë¤ ì‹œë“œ ì´ˆê¸°í™”

    printf("\nğŸ‰ë¹„ë°€ë²ˆí˜¸ ë§íˆê¸° ê²Œì„ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!ğŸ‰\n\n");
    printf("ë¹„ë°€ë²ˆí˜¸ëŠ” ë¬¸ì œì˜ ìˆ˜ì‹ì„ ê³„ì‚°í•œ ë‹µì…ë‹ˆë‹¤.\në‹¨, ì •ë‹µì„ ëª»ë§ì·„ì„ ê²½ìš° ê²Œì„ì´ ê³§ë°”ë¡œ ì¢…ë£Œë©ë‹ˆë‹¤.\n");
    printf("ë¬¸ì œëŠ” ì´ 5ë¬¸ì œì´ë©°, \nê²Œì„ì„ ì‹œì‘í•˜ë ¤ë©´ Y, ë‚˜ê°€ê¸°ë¥¼ ì›í•œë‹¤ë©´ Nì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\n\n");
    printf("ê²Œì„ì„ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (Y/N) >> ");

    while (1)
    {
        char start;           // ê²Œì„ ì‹œì‘ ì—¬ë¶€
        scanf(" %c", &start); // ë¬¸ìì—´ ì…ë ¥ë°›ê¸° (ê³µë°±ì„ ë„£ì–´ì¤˜ì•¼ ì •ìƒì ìœ¼ë¡œ ì…ë ¥ë¨)
        int count = 0;        // ì •ë‹µ ê°œìˆ˜

        if (start == 'N' || start == 'n') // ê²Œì„ ì¢…ë£Œ
        {
            printf("\nê²Œì„ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.\n\n");
            exit(0); // main í¬í•¨, í”„ë¡œê·¸ë¨ ì¢…ë£Œ
        }
        else if (start != 'Y' && start != 'y') // ì˜ëª»ëœ ì…ë ¥
        {
            printf("\nì˜ëª»ëœ ì…ë ¥ì…ë‹ˆë‹¤. ê²Œì„ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.\n\n");
            exit(0); // main í¬í•¨, í”„ë¡œê·¸ë¨ ì¢…ë£Œ
        }

        for (int i = 1; i <= 5; i++)
        {
            int num1 = getRandomNumber(i);
            int num2 = getRandomNumber(i);
            showQuestion(i, num1, num2); // ë¬¸ì œë¥¼ ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜

            int answer = -1;
            scanf("%d", &answer); // ì •ë‹µ ì…ë ¥ ë°›ê¸°
            if (answer == -1)     // ì¢…ë£Œ ì¡°ê±´
            {
                printf("\nê²Œì„ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.\n");
                break;  // ê°€ì¥ ê°€ê¹Œìš´ ë°˜ë³µë¬¸ ì¢…ë£Œ
            }

            if (answer == num1 * num2) // ì •ë‹µ ì²´í¬
            {
                printf("\n=> ì •ë‹µì…ë‹ˆë‹¤!\n");
                count++;
            }
            else
            {
                printf("\n=> í‹€ë ¸ìŠµë‹ˆë‹¤.\n");
                printf("\n\n%dê°œì˜ ë¬¸ì œ ì¤‘ ì •ë‹µì˜ ê°œìˆ˜ëŠ” %d ì…ë‹ˆë‹¤!\n", i, count);
                printf("\nê²Œì„ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.\n\n");
                break; 
            }

            if (count == 5)
            {
                printf("\n\n\nì¶•í•˜í•©ë‹ˆë‹¤! ë¹„ë°€ë²ˆí˜¸ë¥¼ ëª¨ë‘ ë§íˆì…¨ìŠµë‹ˆë‹¤!\n\n");
                printf("\nê²Œì„ì„ ë‹¤ì‹œ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (Y/N) >> ");
            }
        }
        // ê²Œì„ ëë‚˜ê³  ë‚˜ë©´ í•­ìƒ ì¬ì‹œì‘ ë¬¼ì–´ë³´ê¸°
        printf("\nê²Œì„ì„ ë‹¤ì‹œ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (Y/N) >> ");
        scanf(" %c", &start);

        if (start == 'N' || start == 'n')
        {
            printf("\nê²Œì„ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.\n\n");
            break;
        }
        else if (start != 'Y' && start != 'y')
        {
            printf("\nì˜ëª»ëœ ì…ë ¥ì…ë‹ˆë‹¤. ê²Œì„ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.\n\n");
            break;
        }
    }
}

int getRandomNumber(int level)
{
    return rand() % (level * 7) + 1;  // ë‚œì´ë„ì— ë”°ë¼ ëœë¤ ìˆ«ì ì»¤ì§€ë„ë¡ ì„¤ì •
}
void showQuestion(int level, int num1, int num2)
{
    printf("\n\n\n######## %d ë²ˆì§¸ ë¹„ë°€ë²ˆí˜¸ ########\n", level);
    printf("\n\t%d x %d = ?\n\n", num1, num2);
    printf("#################################\n\n");
    printf("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì¢…ë£Œ : -1) >> ");
}